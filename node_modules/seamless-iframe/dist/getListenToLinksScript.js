"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getListenToLinksScript = void 0;
const constants_1 = require("./constants");
const getListenToLinksScript = (id) => `
  {
    const validatedMessage = (url) => JSON.stringify("${constants_1.POST_MESSAGE_IDENTIFIER}///${id}///${constants_1.LINK_CLICK_MESSAGE}///"+url);
    const postMessage = (url) => parent.postMessage(validatedMessage(url), "${window.location.href}");
    const listenToLinks = Array.from(document.querySelectorAll("a")).forEach(a => {
        a.addEventListener("click", (e) => {
          postMessage(a.getAttribute("href"));
          return e.preventDefault();
        });
      });
    window.addEventListener("load", listenToLinks);
  }
`;
exports.getListenToLinksScript = getListenToLinksScript;
